

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start &mdash; Sensirion SEK-SensorBridge Python Driver 0.1.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Sensirion SEK-SensorBridge Python Driver
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="shdlc.html">SHDLC Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Sensirion SEK-SensorBridge Python Driver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quick Start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>Following example code shows how the driver is intended to use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">sensirion_shdlc_driver</span> <span class="kn">import</span> <span class="n">ShdlcSerialPort</span><span class="p">,</span> <span class="n">ShdlcConnection</span>
<span class="kn">from</span> <span class="nn">sensirion_shdlc_sensorbridge</span> <span class="kn">import</span> <span class="n">SensorBridgePort</span><span class="p">,</span> <span class="n">SensorBridgeShdlcDevice</span>

<span class="c1"># Connect to the device with default settings:</span>
<span class="c1">#  - baudrate:      460800</span>
<span class="c1">#  - slave address: 0</span>
<span class="k">with</span> <span class="n">ShdlcSerialPort</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="s1">&#39;COM1&#39;</span><span class="p">,</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">460800</span><span class="p">)</span> <span class="k">as</span> <span class="n">port</span><span class="p">:</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">SensorBridgeShdlcDevice</span><span class="p">(</span><span class="n">ShdlcConnection</span><span class="p">(</span><span class="n">port</span><span class="p">),</span> <span class="n">slave_address</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Print some device information</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Version: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get_version</span><span class="p">()))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Product Name: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get_product_name</span><span class="p">()))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Serial Number: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get_serial_number</span><span class="p">()))</span>

    <span class="c1"># Enable port 1 with an I2C frequency of 400kHz and a voltage of 1.8V</span>
    <span class="n">device</span><span class="o">.</span><span class="n">set_i2c_frequency</span><span class="p">(</span><span class="n">SensorBridgePort</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mf">400e3</span><span class="p">)</span>
    <span class="n">device</span><span class="o">.</span><span class="n">set_supply_voltage</span><span class="p">(</span><span class="n">SensorBridgePort</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">voltage</span><span class="o">=</span><span class="mf">1.8</span><span class="p">)</span>
    <span class="n">device</span><span class="o">.</span><span class="n">switch_supply_on</span><span class="p">(</span><span class="n">SensorBridgePort</span><span class="o">.</span><span class="n">ONE</span><span class="p">)</span>

    <span class="c1"># Perform synchronous I2C transceive on port 1</span>
    <span class="n">rx_data</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">transceive_i2c</span><span class="p">(</span>
        <span class="n">SensorBridgePort</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="mh">0x70</span><span class="p">,</span> <span class="n">tx_data</span><span class="o">=</span><span class="p">[</span><span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">],</span>
        <span class="n">rx_length</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">timeout_us</span><span class="o">=</span><span class="mf">100e3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Received data: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rx_data</span><span class="p">))</span>

    <span class="c1"># Perform asynchronous I2C transceive on port 1</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">start_repeated_i2c_transceive</span><span class="p">(</span>
        <span class="n">SensorBridgePort</span><span class="o">.</span><span class="n">ONE</span><span class="p">,</span> <span class="n">interval_us</span><span class="o">=</span><span class="mf">10e3</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="mh">0x70</span><span class="p">,</span>
        <span class="n">tx_data</span><span class="o">=</span><span class="p">[</span><span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">],</span> <span class="n">rx_length</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">timeout_us</span><span class="o">=</span><span class="mf">100e3</span><span class="p">,</span> <span class="n">read_delay_us</span><span class="o">=</span><span class="mf">10e3</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># let the device perform the repeated transceives</span>
    <span class="n">buffer</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">read_buffer</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">device</span><span class="o">.</span><span class="n">stop_repeated_i2c_transceive</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lost bytes: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">lost_bytes</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Remaining bytes: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">remaining_bytes</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buffered values: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="n">value</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">buffer</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The sent I2C frame in this example is the “measure” command of
Sensirion’s SHTC3 sensor and its response contains the measured
temperature, relative humidity and their checksums. If there is no
SHTC3 connected to the SensorBridge, the I2C commands will fail.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 Sensirion AG, Switzerland

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: 0.1.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="quickstart.html">0.1.0</a></dd>
            <dd><a href="../0.1.1/quickstart.html">0.1.1</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../master/quickstart.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>